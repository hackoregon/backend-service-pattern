#! /bin/bash
usage() { echo "Usage: $0 [-l] for a local test or [-t] for a travis test " 1>&2; exit 1; }

while getopts ":lt" opt; do
    case "$opt" in
        l)
          docker-compose -f local-docker-compose.yml build
          docker-compose -f local-docker-compose.yml exec $DOCKER_IMAGE python manage.py test --noinput
          ;;
        t)
          docker-compose -f travis-docker-compose.yml build
          docker-compose -f travis-docker-compose.yml exec "${DOCKER_REPO}/${DEPLOY_TARGET}/${DOCKER_IMAGE}:latest" python manage.py test --noinput
          ;;
        *)
          usage
          ;;
    esac
done
